-- üõ°Ô∏è Anti SEC Protection
local mt = getrawmetatable(game)
setreadonly(mt, false)
local old = mt.__namecall

mt.__namecall = newcclosure(function(self, ...)
    local method = getnamecallmethod()
    if method == "Kick" or tostring(method):lower():find("kick") then
        return warn("[SEC] Kick blocked")
    end
    return old(self, ...)
end)

hookfunction(game.HttpService.HttpPost, function(...) 
    return warn("[SEC] Blocked HttpPost")
end)

-- üîê Hook RemoteEvent / RemoteFunction anti log
local block_keywords = {
    "log", "report", "exploit", "cheat", "suspicious", "data", "security"
}

local function should_block(name)
    name = name:lower()
    for _, keyword in pairs(block_keywords) do
        if name:find(keyword) then
            return true
        end
    end
    return false
end

mt.__namecall = newcclosure(function(self, ...)
    local method = getnamecallmethod()
    local args = {...}

    if typeof(self) == "Instance" and self:IsA("RemoteEvent") and method == "FireServer" then
        if should_block(self.Name) then
            warn("[SEC] Blocked suspicious RemoteEvent:", self.Name, args)
            return nil
        end
    end

    if typeof(self) == "Instance" and self:IsA("RemoteFunction") and method == "InvokeServer" then
        if should_block(self.Name) then
            warn("[SEC] Blocked suspicious RemoteFunction:", self.Name, args)
            return nil
        end
    end

    return old(self, unpack(args))
end)

-- ‚è±Ô∏è Random delay handler
function random_delay(min, max)
    return task.wait(math.random(min * 100, max * 100) / 100)
end

-- ‚úÖ Config Script
script_key = "QSHYVAMJTGKIND4A433OF3NFWCQKO"
getgenv().Shutdown = false
getgenv().Configs = {
    ["Team"] = "Marines",
    ["FPS Boost"] = {
        ["Enable"] = true,
        ["FPS Cap"] = 20,
    },
    ["Farm Boss Drops"] = {
        ["Enable"] = false,
        ["When x2 Exp Expired"] = false
    },
    ["Hop"] = {
        ["Enable"] = true,
        ["Hop Find Tushita"] = true,
        ["Hop Find Valkyrie Helm"] = true,
        ["Hop Find Mirror Fractal"] = true,
        ["Hop Find Darkbeard"] = true,
        ["Hop Find Soul Reaper"] = true,
        ["Hop Find Mirage"] = true,
        ["Find Fruit"] = false,
    },
    ["Farm Mastery"] = {
        ["Enable"] = true,
        ["Farm Mastery Weapons"] = {"Sword", "Gun", "Blox Fruit"},
        ["Swords To Farm"] = {"Cursed Dual Katana"},
        ["Guns To Farm"] = {"Skull Guitar"},
        ["Mastery Health (%)"] = 40
    },
    ["Farm Config"] = {
        ["First Farm At Sky"] = true,
        ["Farm Bone Get x2 Exp"] = true
    },
    ["Trackstat"] = {
        ["Enable"] = false,
        ["Key"] = "",
        ["Device"] = "test"
    },
    ["Auto Spawn rip_indra"] = true,
    ["Auto Spawn Dough King"] = false,
    ["Auto Pull Lever"] = false,
    ["Auto Collect Berry"] = true,
    ["Auto Evo Race"] = true,
    ["Awaken Fruit"] = true,
    ["Rainbow Haki"] = true,
    ["Hop Player Near"] = true,
    ["Skull Guitar"] = true,
    ["Cursed Dual Katana"] = true,
    ["Switch Melee"] = true,
    ["Eat Fruit"] = "Magma Fruit",
    ["Snipe Fruit"] = "Dough Fruit",
    ["Lock Fragment"] = 30000,
    ["Buy Stuffs"] = true
}

-- üöÄ T·∫£i script ch√≠nh
repeat random_delay(1, 2) until game:IsLoaded()
repeat random_delay(1, 2)
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Xero2409/XeroHub/refs/heads/main/kaitun.lua"))()
    end)
until getgenv().Check_Execute
